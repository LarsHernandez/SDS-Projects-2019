library(data.table)
library(lubridate)
trips       <- fread("https://github.com/SDS-AAU/M1-2019/raw/master/data/trips.csv")
people      <- fread("https://github.com/SDS-AAU/M1-2019/raw/master/data/people.csv")
countrylist <- fread("https://github.com/SDS-AAU/M1-2019/raw/master/data/countrylist.csv")
trips[,c("date_end", "date_start") := .(as.Date(date_end, "%Y-%m-%d"), as.Date(date_start, "%Y-%m-%d"))]
head(trips$date_end, 5)
trips[, dur_days := date_end - date_start]
head(trips$dur_days, 5)
trips[, quantile := dplyr::percent_rank(as.numeric(trips$dur_days))]
trips_s <- trips[quantile >= 0.01 & quantile <= 0.97]
range(na.omit(trips$dur_days))
range(trips_s$dur_days)
View(countrylist)
trips_s[countrylist, on = "country_code", c("region", "sub_region") := .(i.region, i.sub_region)]
trips_s[countrylist, on = "country_code", .("region", "sub_region") := .(i.region, i.sub_region)]
trips_s[countrylist, on = "country_code", c("region", "sub_region") := .(i.region, i.sub_region)]
trips_s[countrylist, on = "country_code", region := i.region]
countrylist[, country_code := alpha_2]
trips_s[countrylist, on = "country_code", region := i.region]
countrylist[, country_code := alpha_2]
trips_s[countrylist, on = "country_code", c("region", "sub_region") := .(i.region, i.sub_region)]
View(trips)
View(trips)
countrylist[, country_code := alpha_2]
trips_s[countrylist, on = "country_code", c("region", "sub_region") := .(i.region, i.sub_region)]
View(trips_s)
head(trips_s)
head(trips_s$region, trips_s$sub_region)
head(data.frame(trips_s$region, trips_s$sub_region))
head(trips_s$region)
head(trips_s[,.(region, sub_region)])
head(trips_s[,.(country_code, dur_days, region, sub_region)])
View(people)
people[, high_school := education_raw %like% "^High school"]
View(people)
people[, high_school := education_raw %like% "^High School"]
View(people)
people[, high_school := education_raw %like% "^High"]
View(people)
people[, high_school := education_raw %like% "^High | ^Master"]
View(people)
people[, high_school := education_raw %like% "^High | ^Master's"]
View(people)
people[, high_school := education_raw %like% "^High | Master's"]
View(people)
people[, high_school := education_raw %like% "^High|Master's"]
View(people)
people[, high_school := education_raw %like% "^High|Master|Bachelor"]
View(people)
unique(people$education_raw)
table(people$education_raw)
people[, high_school := education_raw %like% "High|Master|Bachelor"]
people_s <- people[education_raw != ""]
table(people_s$education_raw)
people_s[work_raw %like% "Software Dev"]
people_s[work_raw %like% "Software Dev" | education_raw %like% "Master" ]
people_s[work_raw %like% "Software Dev" & education_raw %like% "Master" ]
a <- people_s[work_raw %like% "Software Dev" & education_raw %like% "Master" ]
View(a)
people_s[work_raw %like% "Software Dev" & education_raw %like% "Master", .N]
people_s[education_raw %like% "Master"][order(followers)]
people_s[education_raw %like% "Master"][order(-followers)]
people_s[education_raw %like% "Master"][order(-followers)][head]
people_s[education_raw %like% "Master"][order(-followers)][head()]
people_s[education_raw %like% "Master"][order(-followers)]
ans <- people_s[education_raw %like% "Master"][order(-followers)]
head(ans)
people_s[username == "@levelsio"]
trips_s[trips = sum(.N), by=country]
trips_s[,trips = sum(.N), by=country]
trips_s[,trips = .N, by=country]
trips_s[, .N, by=country]
trips_s[, .N, by=country][order()]
trips_s[, .N, by=country][order(.N)]
trips_s[, .N, by=country][order(.N)]
trips_s[, .N, by=country]
trips_s[, .N, by=country][,order(.N)]
trips_s[, .N, by=country][order(-.N)]
trips_s[, .N, by=country]
trips_s[, .N, by=country][order(N)]
trips_s[, .N, by=country][order(-N)]
a <- trips_s[, .N, by=country][order(-N)]
head(a)
a <- trips_s[year(date_start)== 2017, .N, by=country][order(-N)]
head(a)
b <- trips_s[year(date_start)== 2017, .N, by=country][order(-N)]
head(b)
c <- trips_s[region == 'Eastern Asia', .N, by = country][order(-N)]
c
c <- trips_s[sub_region == 'Eastern Asia', .N, by = country][order(-N)]
c
c <- trips_s[sub_region == 'Eastern Asia', dur_days, by = country][order(-N)]
c <- trips_s[sub_region == 'Eastern Asia', dur_days, by = country][order(-dur_days)]
c
c <- trips_s[sub_region == 'Eastern Asia', dur_days][order(-dur_days)]
c
c <- trips_s[sub_region == 'Eastern Asia', dur_days][order(-dur_days)]
c <- trips_s[sub_region == 'Eastern Asia', .(dur_days)][order(-dur_days)]
c
c <- trips_s[sub_region == 'Eastern Asia', .(dur_days, country)][order(-dur_days)]
c
c <- trips_s[sub_region == 'Eastern Asia', dur_days, by = country][order(-dur_days)]
c
c <- trips_s[sub_region == 'Eastern Asia', mean(dur_days), by = country][order(-dur_days)]
c <- trips_s[sub_region == 'Eastern Asia', md = mean(dur_days), by = country][order(-dur_days)]
c <- trips_s[sub_region == 'Eastern Asia', md = mean(dur_days), by = country][order(-md)]
c <- trips_s[sub_region == 'Eastern Asia', .(md = mean(dur_days)), by = country][order(-md)]
c
c <- trips_s[sub_region == 'Eastern Asia', .(md = mean(dur_days)), by = country][order(md)]
c
ggplot2::ggplot(c, aes(md, country)) + geom_bar(stat="identity")
library(ggplot2)
c <- trips_s[sub_region == 'Eastern Asia', .(md = mean(dur_days)), by = country][order(md)]
c
ggplot(c, aes(md, country)) + geom_bar(stat="identity")
ggplot(c, aes(country, md)) + geom_bar(stat="identity")
c <- trips_s[sub_region == 'Eastern Asia', .(mean_dur = mean(dur_days)), by = country][order(mean_dur)]
ggplot(c, aes(country, md)) + geom_bar(stat="identity")
ggplot(c, aes(country, mean_dur)) + geom_bar(stat="identity")
ggplot(c, aes(country, mean_dur)) + geom_bar(stat="identity") + labs(title="Mean duration of stay in Eastern Asian countries")
ggplot(c, aes(country, mean_dur)) + geom_bar(stat="identity") + labs(title="Mean duration of stay in East Asian countries")
trips_s[, .(mean_dur = mean(dur_days)), by = year(date_start)]
ggplot(e1, aes(year, mean_dur)) + geom_line()
e1 <- trips_s[, .(mean_dur = mean(dur_days)), by = year(date_start)]
ggplot(e1, aes(year, mean_dur)) + geom_line()
ggplot(e1, aes(mean_dur, year)) + geom_line()
ggplot(e1, aes(year, mean_dur)) + geom_point
ggplot(e1, aes(year, mean_dur)) + geom_point()
View(e1)
e1 <- trips_s[, .(mean_dur = mean(dur_days)), by = year(date_start)][year>1970 & year < 2019]
ggplot(e1, aes(year, mean_dur)) + geom_point()
ggplot(e1, aes(year, mean_dur)) + geom_line()
e2 <- trips_s[, .(mean_dur = mean(dur_days)), by = .(year(date_start), region)][year>1970 & year < 2019]
ggplot(e2, aes(year, mean_dur)) + geom_line() + facet_wrap(~region)
trips_s[people, on = "username", c("work_raw") := .(i.work_raw)]
View(people_s)
View(trips_s)
trips_s[, dev := work_raw %like% "Software Dev"]
View(people_s)
View(trips_s)
d <- trips_s[,.(mean_dur = mean(dur_days)), by = dev]
d
trips_s[people, on = "username", c("work_raw") := .(i.work_raw)]
trips_s[, dev := work_raw %like% "Software Dev"]
trips_s[,.(mean_dur = mean(dur_days)), by = dev]
library(data.table)
library(ggplot2)
trips       <- fread("https://github.com/SDS-AAU/M1-2019/raw/master/data/trips.csv")
people      <- fread("https://github.com/SDS-AAU/M1-2019/raw/master/data/people.csv")
countrylist <- fread("https://github.com/SDS-AAU/M1-2019/raw/master/data/countrylist.csv")
trips[,c("date_end", "date_start") := .(as.Date(date_end, "%Y-%m-%d"), as.Date(date_start, "%Y-%m-%d"))]
head(trips$date_end, 5)
trips[, dur_days := date_end - date_start]
head(trips$dur_days, 5)
trips[, quantile := dplyr::percent_rank(as.numeric(trips$dur_days))]
trips_s <- trips[quantile >= 0.01 & quantile <= 0.97]
range(na.omit(trips$dur_days))
range(trips_s$dur_days)
countrylist[, country_code := alpha_2]
trips_s[countrylist, on = "country_code", c("region", "sub_region") := .(i.region, i.sub_region)]
head(trips_s[,.(country_code, dur_days, region, sub_region)])
people_s <- people[education_raw != ""]
table(people_s$education_raw)
people[, high_school := education_raw %like% "High|Master|Bachelor"]
people_s[work_raw %like% "Software Dev" & education_raw %like% "Master", .N]
c <- people_s[education_raw %like% "Master"][order(-followers)]
head(c)
people_s[username == "@levelsio"]
a <- trips_s[, .N, by = country][order(-N)]
head(a)
b <- trips_s[year(date_start) == 2017, .N, by = country][order(-N)]
head(b)
c <- trips_s[sub_region == 'Eastern Asia', .(mean_dur = mean(dur_days)), by = country][order(mean_dur)]
c
ggplot(c, aes(country, mean_dur)) +
geom_bar(stat="identity") +
labs(title="Mean duration of stay in East Asian countries")
trips_s[people, on = "username", c("work_raw") := .(i.work_raw)]
trips_s[, dev := work_raw %like% "Software Dev"]
trips_s[,.(mean_dur = mean(dur_days)), by = dev]
e1 <- trips_s[, .(mean_dur = mean(dur_days)), by = year(date_start)][year>1970 & year < 2019]
ggplot(e1, aes(year, mean_dur)) + geom_line()
e2 <- trips_s[, .(mean_dur = mean(dur_days)), by = .(year(date_start), region)][year>1970 & year < 2019]
ggplot(e2, aes(year, mean_dur)) + geom_line() + facet_wrap(~region)
ggplot(c, aes(country, mean_dur)) +
geom_bar(stat="identity") +
scale_y_continuous() +
labs(title="Mean duration of stay in East Asian countries")
1
e1 <- trips_s[, .(mean_dur = mean(dur_days)), by = year(date_start)][year>1970 & year < 2019]
ggplot(e1, aes(year, mean_dur)) +
scale_y_continuous() +
geom_line()
e2 <- trips_s[, .(mean_dur = mean(dur_days)), by = .(year(date_start), region)][year>1970 & year < 2019]
ggplot(e2, aes(year, mean_dur)) +
scale_y_continuous() +
geom_line() +
facet_wrap(~region)
View(trips_s)
people[,.N]
people_s[,.N]
people_s <- people[education_raw != ""]
table(people_s$education_raw)
people_s[,.N]
people[, high_school := education_raw %like% "High|Master|Bachelor"]
table(people_s$education_raw, people_s$work_raw)
table(people_s$education_raw)
people_s[work_raw %like% "Software Dev" & education_raw %like% "Master", .N]
c <- people_s[education_raw %like% "Master"][order(-followers)]
head(c)
people_s[username == "@levelsio"]
ggplot(c, aes(country, mean_dur)) +
geom_bar()
c <- trips_s[sub_region == 'Eastern Asia', .(mean_dur = mean(dur_days)), by = country][order(mean_dur)]
c
ggplot(c, aes(country, mean_dur)) +
geom_bar(stat="identity") +
scale_y_continuous() +
labs(title="Mean duration of stay in East Asian countries")
ggplot(c, aes(country, mean_dur)) +
geom_bar()
ggplot(c, aes(country, mean_dur)) +
geom_col()
c <- trips_s[sub_region == 'Eastern Asia', .(mean_dur = mean(dur_days)), by = country][order(mean_dur)]
c
ggplot(c, aes(country, mean_dur)) +
geom_bar(stat="identity") +
scale_y_continuous() +
labs(title="Mean duration of stay in East Asian countries")
ggplot(c, aes(country, mean_dur)) +
geom_col()
ggplot(c, aes(reorder(country, mend_dur), mean_dur)) +
geom_col +
scale_y_continuous() +
labs(title="Mean duration of stay in East Asian countries")
ggplot(c, aes(reorder(country, mend_dur), mean_dur)) +
geom_col() +
scale_y_continuous() +
labs(title="Mean duration of stay in East Asian countries")
ggplot(c, aes(reorder(country, mean_dur), mean_dur)) +
geom_col() +
scale_y_continuous() +
labs(title="Mean duration of stay in East Asian countries")
c
c <- trips_s[sub_region == 'Eastern Asia', .(mean_dur = mean(dur_days), total = .N), by = country][order(mean_dur)]
c
